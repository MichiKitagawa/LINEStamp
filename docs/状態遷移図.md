stateDiagram-v2
    [*] --> pending_upload
    pending_upload --> generating        : アップロード成功
    generating     --> generated         : 整形成功
    generated      --> submitting        : 申請ボタン押下
    submitting     --> submitted         : LINE申請成功
    submitting     --> failed            : 申請失敗（DOMエラー等）
    submitting     --> session_expired   : Cookie無効
    failed         --> submitting        : 再申請（手動 or 自動)
    session_expired --> submitting       : 再ログイン成功後自動再申請